<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>C∆° ch·∫ø Infinite Scroll c·ªßa Facebook (2026)</title>
  <style>
    :root {
      --primary: #1877f2;
      --dark: #1c1e21;
      --gray: #606770;
      --light: #f0f2f5;
      --white: #ffffff;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacC, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: var(--light);
      color: var(--dark);
      line-height: 1.5;
      padding-bottom: 80px;
    }

    .container {
      max-width: 720px;
      margin: 40px auto;
      padding: 0 20px;
    }

    h1 {
      color: var(--primary);
      font-size: 2.4rem;
      margin-bottom: 1.2rem;
      text-align: center;
    }

    .lead {
      font-size: 1.28rem;
      color: var(--gray);
      text-align: center;
      margin-bottom: 2.5rem;
      font-weight: 500;
    }

    .section {
      background: var(--white);
      border-radius: 12px;
      padding: 28px;
      margin-bottom: 32px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.08);
    }

    h2 {
      color: var(--primary);
      font-size: 1.85rem;
      margin: 0 0 1.1rem 0;
      border-bottom: 2px solid var(--primary);
      padding-bottom: 0.6rem;
    }

    h3 {
      color: #333;
      font-size: 1.38rem;
      margin: 1.8rem 0 0.9rem;
    }

    p {
      margin-bottom: 1.1rem;
      font-size: 1.08rem;
    }

    .highlight {
      background: rgba(24, 119, 242, 0.08);
      padding: 1px 6px;
      border-radius: 4px;
      color: var(--primary);
      font-weight: 600;
    }

    pre {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 18px;
      border-radius: 10px;
      overflow-x: auto;
      font-size: 0.96rem;
      margin: 1.4rem 0;
      line-height: 1.45;
    }

    code {
      font-family: 'Consolas', 'Monaco', monospace;
    }

    .table-wrapper {
      overflow-x: auto;
      margin: 1.8rem 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 1.02rem;
    }

    th, td {
      padding: 14px 16px;
      text-align: left;
      border-bottom: 1px solid #ddd;
    }

    th {
      background: var(--primary);
      color: white;
      font-weight: 600;
    }

    tr:nth-child(even) {
      background: rgba(0,0,0,0.02);
    }

    .conclusion {
      background: linear-gradient(135deg, #e6f0ff, #d6e6ff);
      border-left: 5px solid var(--primary);
      padding: 24px;
      border-radius: 10px;
      margin-top: 2.5rem;
    }

    .emoji {
      font-size: 1.4rem;
      margin-right: 0.4rem;
    }
  </style>
</head>
<body>

  <div class="container">
    <h1>C∆° ch·∫ø cu·ªôn v√¥ h·∫°n (infinite scroll) c·ªßa Facebook</h1>
    <p class="lead">M·ªôt trong nh·ªØng v√≠ d·ª• kinh ƒëi·ªÉn v√† ƒë∆∞·ª£c t·ªëi ∆∞u h√≥a r·∫•t t·ªët nh·∫•t hi·ªán nay (t√≠nh ƒë·∫øn 2026)</p>

    <div class="section">
      <p>N√≥ kh√¥ng ƒë∆°n gi·∫£n ch·ªâ l√† "cu·ªôn xu·ªëng th√¨ load th√™m", m√† l√† s·ª± k·∫øt h·ª£p tinh vi gi·ªØa <span class="highlight">frontend</span>, <span class="highlight">backend</span> v√† c·∫£ <span class="highlight">thi·∫øt k·∫ø t√¢m l√Ω</span>.</p>
    </div>

    <div class="section">
      <h2>Nguy√™n l√Ω ho·∫°t ƒë·ªông t·ªïng quan</h2>
      <p>Khi b·∫°n cu·ªôn news feed xu·ªëng, Facebook s·∫Ω t·ª± ƒë·ªông t·∫£i th√™m b√†i vi·∫øt m·ªõi m√† kh√¥ng c·∫ßn nh·∫•n n√∫t "Xem th√™m". C∆° ch·∫ø ch√≠nh bao g·ªìm c√°c b∆∞·ªõc sau:</p>

      <h3>1. Ph√°t hi·ªán th·ªùi ƒëi·ªÉm c·∫ßn load th√™m (Trigger detection)</h3>
      <p>Hi·ªán ƒë·∫°i nh·∫•t (t·ª´ kho·∫£ng 2018‚Äì2019 tr·ªü ƒëi) Facebook s·ª≠ d·ª•ng <strong>Intersection Observer API</strong> (chu·∫©n web hi·ªán ƒë·∫°i, hi·ªáu su·∫•t c·ª±c cao).</p>
      <p>H·ªç ƒë·∫∑t m·ªôt "<strong>sentinel</strong>" element (th∆∞·ªùng l√† m·ªôt div v√¥ h√¨nh) ·ªü g·∫ßn cu·ªëi danh s√°ch b√†i vi·∫øt hi·ªán t·∫°i.</p>
      <p>Khi ph·∫ßn t·ª≠ n√†y xu·∫•t hi·ªán trong viewport (ng∆∞·ªùi d√πng cu·ªôn g·∫ßn t·ªõi), Intersection Observer s·∫Ω k√≠ch ho·∫°t callback ‚Üí g·ªçi API load th√™m d·ªØ li·ªáu.</p>
      <p>‚Üí C√°ch n√†y ti·∫øt ki·ªám CPU h∆°n r·∫•t nhi·ªÅu so v·ªõi vi·ªác nghe s·ª± ki·ªán scroll li√™n t·ª•c (scroll event listener c≈©).</p>

      <p>Tr∆∞·ªõc ƒë√¢y (kho·∫£ng 2010‚Äì2017) h·ªç d√πng c√°ch t√≠nh to√°n v·ªã tr√≠ scroll + chi·ªÅu cao document (ki·ªÉu <code>window.scrollY + window.innerHeight >= document.body.offsetHeight - threshold</code>).</p>

      <h3>2. G·ªçi d·ªØ li·ªáu t·ª´ server (Data fetching)</h3>
      <p>Facebook s·ª≠ d·ª•ng <strong>GraphQL + Relay</strong> (framework do ch√≠nh Facebook t·∫°o ra).</p>
      <p>Ki·ªÉu ph√¢n trang l√† <strong>cursor-based pagination</strong> (kh√¥ng d√πng offset/page number).</p>
      <p>M·ªói l·∫ßn g·ªçi s·∫Ω g·ª≠i cursor (m·ªôt chu·ªói m√£ h√≥a v·ªã tr√≠ hi·ªán t·∫°i) v√† s·ªë l∆∞·ª£ng mu·ªën l·∫•y ti·∫øp (th∆∞·ªùng 5‚Äì15 b√†i t√πy thi·∫øt b·ªã/m·∫°ng).</p>
      <p>Server tr·∫£ v·ªÅ:</p>
      <ul>
        <li>Danh s√°ch b√†i vi·∫øt m·ªõi (<code>edges</code>)</li>
        <li><code>pageInfo</code> ch·ª©a <code>hasNextPage</code> v√† <code>endCursor</code> m·ªõi</li>
      </ul>
      <p>‚Üí N·∫øu c√≤n d·ªØ li·ªáu th√¨ ti·∫øp t·ª•c, n·∫øu h·∫øt th√¨ d·ª´ng.</p>

      <pre><code>query NewsFeed($count: Int!, $cursor: String) {
  viewer {
    newsfeedStories(first: $count, after: $cursor) {
      edges {
        node { ...PostFields }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}</code></pre>
    </div>

    <div class="section">
      <h2>3. Render & t·ªëi ∆∞u hi·ªáu su·∫•t (Rendering + Performance)</h2>
      <ul>
        <li><strong>Virtualization / Windowing</strong>: Facebook kh√¥ng render h·∫øt t·∫•t c·∫£ b√†i vi·∫øt ƒë√£ load v√†o DOM (n·∫øu scroll 3‚Äì4 ti·∫øng th√¨ c√≥ th·ªÉ h√†ng ngh√¨n post ‚Üí crash tr√¨nh duy·ªát).<br>‚Üí H·ªç ch·ªâ gi·ªØ trong DOM kho·∫£ng 10‚Äì30 b√†i g·∫ßn viewport, c√°c b√†i c≈© h∆°n s·∫Ω b·ªã unmount v√† ch·ªâ gi·ªØ data trong memory/cache.<br>‚Üí Khi scroll ng∆∞·ª£c l√™n th√¨ m·ªõi render l·∫°i t·ª´ data cache.<br>‚Üí K·ªπ thu·∫≠t n√†y gi·ªëng react-window, react-virtualized ho·∫∑c t·ª± implement.</li>
        <li><strong>Prefetching</strong>: Th·ªânh tho·∫£ng h·ªç load tr∆∞·ªõc 1 batch d·ªØ li·ªáu khi b·∫°n ƒëang ƒë·ªçc ch·∫≠m (d·ª± ƒëo√°n h√†nh vi).</li>
        <li><strong>Lazy loading</strong> h√¨nh ·∫£nh/video: Ch·ªâ load th·∫≠t khi b√†i vi·∫øt g·∫ßn viewport.</li>
      </ul>
    </div>

    <div class="section">
      <h2>T·∫°i sao Facebook l√†m ƒë∆∞·ª£c m∆∞·ª£t ƒë·∫øn v·∫≠y?</h2>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Y·∫øu t·ªë</th>
              <th>Gi·∫£i ph√°p c·ªßa Facebook</th>
              <th>L·ª£i √≠ch ch√≠nh</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Ph√°t hi·ªán cu·ªôn</td>
              <td>Intersection Observer + sentinel element</td>
              <td>Ti·∫øt ki·ªám CPU, ch√≠nh x√°c cao</td>
            </tr>
            <tr>
              <td>Ph√¢n trang</td>
              <td>Cursor-based + GraphQL + Relay</td>
              <td>·ªîn ƒë·ªãnh, d·ªÖ cache, kh√¥ng duplicate</td>
            </tr>
            <tr>
              <td>Qu·∫£n l√Ω DOM</td>
              <td>Virtualization / Windowing</td>
              <td>Kh√¥ng crash d√π scroll h√†ng gi·ªù</td>
            </tr>
            <tr>
              <td>M·∫°ng & Cache</td>
              <td>CDNs to√†n c·∫ßu + aggressive caching + prefetch</td>
              <td>Load nhanh d√π m·∫°ng y·∫øu</td>
            </tr>
            <tr>
              <td>C√° nh√¢n h√≥a</td>
              <td>Machine Learning d·ª± ƒëo√°n n·ªôi dung b·∫°n mu·ªën xem ti·∫øp</td>
              <td>Gi·ªØ b·∫°n scroll c√†ng l√¢u c√†ng t·ªët</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="section conclusion">
      <h2>T√≥m l·∫°i</h2>
      <p>C∆° ch·∫ø cu·ªôn v√¥ h·∫°n c·ªßa Facebook l√† s·ª± k·∫øt h·ª£p ho√†n h·∫£o gi·ªØa:</p>
      <p style="font-size: 1.24rem; margin: 1.5rem 0; font-weight: 600;">
        <span class="emoji">üëÅÔ∏è</span> Intersection Observer (ph√°t hi·ªán)<br>
        <span class="emoji">üì°</span> GraphQL Relay cursor pagination (l·∫•y d·ªØ li·ªáu)<br>
        <span class="emoji">üñºÔ∏è</span> Virtualized rendering (hi·ªÉn th·ªã th√¥ng minh)<br>
        <span class="emoji">üß†</span> H·ªá th·ªëng d·ª± ƒëo√°n h√†nh vi ng∆∞·ªùi d√πng (gi·ªØ ch√¢n b·∫°n)
      </p>

      <p>N·∫øu b·∫°n ch·ªâ l√†m m·ªôt trang c√° nh√¢n nh·ªè th√¨ d√πng <strong>Intersection Observer + fetch API</strong> b√¨nh th∆∞·ªùng l√† ƒë·ªß m∆∞·ª£t r·ªìi.</p>
      <p style="font-weight: bold; color: #d32f2f;">Nh∆∞ng ƒë·ªÉ ƒë·∫°t ƒë·ªô "nghi·ªán" nh∆∞ Facebook th√¨... c√≤n ph·∫£i ƒë·∫ßu t∆∞ r·∫•t nhi·ªÅu v√†o backend + ML n·ªØa ƒë·∫•y! üöÄ</p>
    </div>
  </div>

</body>
</html>
